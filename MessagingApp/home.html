<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>

    <link rel="stylesheet" href="css/site.css" />
    <script src="js/library/jquery.js"></script>
    <script src="js/library/vue.js"></script>
    <script src="js/site.js"></script>
</head>
<body onload="checkLogin(false)">
    <div id="content">
        <a href="#" onclick="logout()">Logout</a>
        <table id="messenger">
            <tr>
                <td valign="top">
                    Logged in as: {{information.email}}<br />
                    <input type="text" v-model="search" />
                    <button v-on:click="Search()">Search</button><br />
                    <div v-for="member in result">
                        <button v-on:click="AddContact(member.username)">Add contact</button> 
                        {{member.username}}<br />
                        {{member.email}}<hr />
                    </div><br />
                    <b>Contacts</b>
                    <div v-for="member in contacts">
                        <a href="#" v-on:click="SelectRecipient(member.username1)">{{member.last_name}}, {{member.first_name}}</a>
                        <span v-if="member.message_count > 0"><b>( {{member.message_count}} )</b></span>
                        <br />
                    </div><br />
                    <b>Incoming</b>
                    <div v-for="member in uncontacts">
                        <button v-on:click="AddContact(member.username)">Add contact</button> 
                        {{member.username}}<br />
                        {{member.email}}<hr />
                    </div><br />
                </td>
                <td valign="top" style="width: 75%">
                    <div v-if="username != ''">
                        <input type="text" v-model="message" />
                        <button v-on:click="SendMessage()">Send message to {{username}}</button>
                        <br /><br />
                        <div v-for="member in messages">
                            <span v-if="username == member.username">
                                <b>{{member.email}}</b> <span class="small_text">({{member.insert_time1}})</span><br />
                                <span>{{member.message}} >></span>
                            </span>
                            <span v-else>
                                <span class="small_text float_right">({{member.insert_time1}})</span><br />
                                <span class="float_right"><< {{member.message}}</span>
                            </span><br /><hr />
                        </div>
                        <center>
                            <button v-on:click="NextMessages()">Show next 10 messages</a>
                        </center>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <script src="js/home.js"></script>
</body>
</html>
